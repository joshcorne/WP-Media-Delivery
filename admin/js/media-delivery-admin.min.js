!function(e){"use strict";e(document).ready((function(){const t=e("#post_ID").val();function i(){var t=e("#meta-fields-meta-box #meta-fields-booking-ref").val(),i=e("#meta-fields-meta-box #meta-fields-customer-surname").val();t.length+i.length>20?(e("#meta-fields-meta-box #meta-fields-error-msg").text(translatedStrings.passwordLengthError),e("#meta-fields-meta-box #meta-fields-error-msg").removeClass("hidden")):(e("#meta-fields-meta-box #meta-fields-error-msg").text(""),e("#meta-fields-meta-box #meta-fields-error-msg").addClass("hidden"))}e(".color-picker").iris({change:(t,i)=>{e("#"+t.target.id+"-preview").css("background-color",i.color.toString())}}),e(document).on("click",".activation-notice .notice-dismiss",(t=>{e.ajax(ajaxurl,{type:"POST",data:{action:"dismiss_activation_notice",notice:t.target.parentElement.id}})})),e("#meta-fields-meta-box #meta-fields-booking-ref").on("change",(()=>{i()})),e("#meta-fields-meta-box #meta-fields-customer-surname").on("change",(()=>{i()})),e("#publish-media-box input#publish").on("click",(t=>{0!==e(".img-list li").length||g.html().trim()?(e("#publish-media-box #publish-error-msg").text(""),e("#publish-media-box #publish-error-msg").addClass("hidden")):(t.preventDefault(),e("#publish-media-box #publish-error-msg").text(translatedStrings.mediaMissingError),e("#publish-media-box #publish-error-msg").removeClass("hidden"))}));var a,s=(r=e("#images-meta-box.postbox")).find(".img-list"),l=r.find(".upload-img"),o=s.find(".delete-img");function n(){o.on("click",(t=>{t.preventDefault(),e(t.target).parent().parent().parent().remove()}))}n(),l.on("click",(i=>{i.preventDefault(),a||(a=wp.media({title:translatedStrings.imgFrameTitle,button:{text:translatedStrings.imgFrameButton},library:{type:"image",uploadedTo:t,search:null},frame:"select",multiple:!0}),e.extend(wp.Uploader.prototype,{success:e=>{a.content.get().collection._requery(!0)}}),a.on("select",(()=>{a.state().get("selection").models.map((e=>e.toJSON())).forEach(((e,t)=>{if("image"===e.mime.substr(0,e.mime.indexOf("/"))){var i="",a=e.sizes.hasOwnProperty("thumbnail")?e.sizes.thumbnail.url:e.sizes.full.url;i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.concat('<li class="image" data-attachment_id="'+e.id+'">')).concat('<img src="'+a+'" alt="" />')).concat('<input class="img-id" name="img_ids['+t+']" type="hidden" value="'+e.id+'" />')).concat('<ul class="actions">')).concat("<li>")).concat('<a class="delete-img" href="#" title="'+translatedStrings.deleteButton+'">')).concat("Delete")).concat("</a>")).concat("</li>")).concat("</ul>")).concat("</li>"),s.append(i),o=s.find(".delete-img"),n()}}))}))),a.open()}));var d,r,m=(r=e("#video-meta-box.postbox")).find(".upload-vid"),c=r.find(".delete-vid"),u=r.find("#video-loading"),g=r.find("#vid-embed"),p=r.find(".vid-id");m.on("click",(i=>{i.preventDefault(),d||(d=wp.media({title:translatedStrings.videoFrameTitle,button:{text:translatedStrings.videoFrameButton},library:{type:"video",uploadedTo:t,search:null},multiple:!1,frame:"select"})).on("select",(()=>{var t=d.state().get("selection").first().toJSON();"video"===t.mime.substr(0,t.mime.indexOf("/"))&&(u.removeClass("hidden"),e.ajax({url:ajaxurl,method:"POST",data:{src:t.url,action:"fetch_video_shortcode"}}).done((e=>{g.html(e.data),u.addClass("hidden")})),p.val(t.id),m.addClass("hidden"),c.removeClass("hidden"))})),d.open()})),c.on("click",(e=>{e.preventDefault(),g.html(""),m.removeClass("hidden"),c.addClass("hidden"),p.val("")})),e(".img-list").each(((t,i)=>{e(i).sortable()}))}))}(jQuery);